<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interior Designer Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
        } 
        .heading{
            width: max-content;
            margin: 2rem auto;
        }
        .container {
            display: flex;
            width: 90%;
            height: 90vh;
            margin: 5vh auto;
            background-color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            overflow: hidden;
        }
        
        .left-section {
            width: 40%;
            height: 100%;
            overflow-y: auto;
            border-right: 1px solid #e0e0e0;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .i_right_section {
            width: 60%;
            height: 100%;
            position: relative;
            padding: 20px;
            background-color: white;
        }
        
        .designer-card {
            display: flex;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid #e0e0e0;
            background-color: white;
        }
        
        .designer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .designer-card.active {
            background-color: #e6f7ff;
            border-color: #91d5ff;
        }
        
        .designer-image-small {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
            border: 2px solid #e0e0e0;
        }
        
        .designer-info h3 {
            margin-bottom: 5px;
            color: #333;
            font-size: 18px;
        }
        
        .designer-info p {
            color: #666;
            font-size: 14px;
        }
        
        .rating {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .rating .star {
            color: #ffd700;
            font-size: 16px;
            margin-right: 2px;
        }
        
        .right-content {
            height: calc(100% - 60px);
            overflow-y: auto;
            padding-bottom: 20px;
        }
        
        .right-content h2 {
            margin-bottom: 15px;
            color: #333;
            font-size: 24px;
        }
        
        .right-content .designer-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .designer-image-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 20px;
            border: 3px solid #e0e0e0;
        }
        
        .bio {
            margin-bottom: 30px;
        }
        
        .bio h3 {
            margin-bottom: 10px;
            color: #333;
            font-size: 20px;
        }
        
        .bio p {
            color: #555;
            line-height: 1.6;
        }
        
        .projects {
            margin-top: 30px;
        }
        
        .projects h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 20px;
        }
        
        .project {
            margin-bottom: 30px;
        }
        
        .project h4 {
            margin-bottom: 10px;
            color: #333;
            font-size: 18px;
        }
        
        .project-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .project p {
            color: #555;
            line-height: 1.6;
        }
        
        .reviews {
            margin-top: 30px;
        }
        
        .reviews h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 20px;
        }
        
        .review {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
        }
        
        .review h4 {
            margin-bottom: 5px;
            color: #333;
            font-size: 16px;
        }
        
        .review p {
            color: #555;
            line-height: 1.6;
        }
        
        .book-now-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            background-color: white;
            border-top: 1px solid #e0e0e0;
            text-align: center;
        }
        
        .book-now-btn {
            background-color: #1890ff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s, transform 0.3s;
        }
        
        .book-now-btn:hover {
            background-color: #096dd9;
            transform: translateY(-2px);
        }
        
        .hidden {
            display: none;
        }

        .company-info {
            margin-bottom: 30px;
        }

        .company-info h2 {
            margin-bottom: 15px;
            color: #333;
            font-size: 24px;
        }

        .company-info p {
            color: #555;
            line-height: 1.6;
        }

        .company-info ul {
            list-style-type: disc;
            margin-left: 20px;
            color: #555;
        }

        .company-info ul li {
            margin-bottom: 10px;
        }
        
        .designer-details {
            display: none;
        }
        
        .designer-details.active {
            display: block;
        }
    </style>
</head>
<body>
    <%- include('navbar_customer') %>
    <h1 class="heading">Interior Designers</h1>
    <div class="container">
        <div class="left-section" id="designerList">
            <% if (designers && designers.length > 0) { %>
                <% designers.forEach((designer, index) => { %>
                    <div class="designer-card" data-id="<%= designer._id %>">
                        <img src="<%= designer.profileImage || 'https://t4.ftcdn.net/jpg/03/64/21/11/360_F_364211147_1qgLVxv1Tcq0Ohz3FawUfrtONzz8nq3e.jpg' %>" 
                             alt="<%= designer.name %>" class="designer-image-small">
                        <div class="designer-info">
                            <h3><%= designer.name %></h3>
                            <p><%= designer.professionalTitle || 'Interior Designer' %></p>
                            <p><%= designer.experience %> years experience</p>
                            <div class="rating">
                                <% for(let i = 0; i < Math.floor(designer.rating); i++) { %>
                                    <span class="star">★</span>
                                <% } %>
                                <% if(designer.rating % 1 >= 0.5) { %>
                                    <span class="star">½</span>
                                <% } %>
                                <span>(<%= designer.rating %>)</span>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div class="no-designers">
                    <p>No interior designers are currently available.</p>
                </div>
            <% } %>
        </div>
        
        <div class="i_right_section">
            <div class="right-content" id="designerDetails">
                <!-- Initial welcome message -->
                <div class="initial-message">
                    <div class="company-info">
                        <h2>Welcome to Build & Beyond Interior Designers</h2>
                        <p>Build & Beyond Interior Designers is a leading design firm dedicated to creating innovative and sustainable interior spaces that inspire and transform communities. With over 20 years of experience, our team of talented designers has delivered award-winning projects across the globe.</p>
                        <h3>Our Mission</h3>
                        <p>Our mission is to design spaces that enhance the quality of life, promote sustainability, and reflect the unique identity of our clients. We believe in the power of interior design to shape the future and create lasting impact.</p>
                        <h3>Our Services</h3>
                        <ul>
                            <li>Residential Interior Design</li>
                            <li>Commercial Interior Design</li>
                            <li>Space Planning</li>
                            <li>Furniture Design</li>
                            <li>Lighting Design</li>
                            <li>Sustainable Design</li>
                            <li>Color Consultation</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Dynamic Designer Details -->
                <% if (designers && designers.length > 0) { %>
                    <% designers.forEach(designer => { %>
                        <div class="designer-details" id="designer-<%= designer._id %>">
                            <div class="designer-header">
                                <img src="<%= designer.profileImage || 'https://t4.ftcdn.net/jpg/03/64/21/11/360_F_364211147_1qgLVxv1Tcq0Ohz3FawUfrtONzz8nq3e.jpg' %>" 
                                     alt="<%= designer.name %>" class="designer-image-large">
                                <div>
                                    <h2><%= designer.name %></h2>
                                    <p><strong><%= designer.professionalTitle || 'Interior Designer' %></strong> with <%= designer.experience %> years experience</p>
                                    <div class="rating">
                                        <% for(let i = 0; i < Math.floor(designer.rating); i++) { %>
                                            <span class="star">★</span>
                                        <% } %>
                                        <% if(designer.rating % 1 >= 0.5) { %>
                                            <span class="star">½</span>
                                        <% } %>
                                        <span>(<%= designer.rating %>)</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bio">
                                <h3>About</h3>
                                <p><%= designer.about || 'Information not available' %></p>
                                <p><strong>Specialties:</strong> <%= designer.specialties && designer.specialties.length > 0 ? designer.specialties.join(', ') : 'Information not available' %></p>
                            </div>
                            
                            <div class="projects">
                                <h3>Notable Projects</h3>
                                <% if (designer.projects && designer.projects.length > 0) { %>
                                    <% designer.projects.forEach(project => { %>
                                        <div class="project">
                                            <h4><%= project.name %> (<%= project.year %>)</h4>
                                            <p><strong>Location:</strong> <%= project.location %></p>
                                            <img src="<%= project.image || 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQC7-RFA1xE4wTSP0DZJSJ1AJ8TitBYtkmEYA&s' %>" 
                                                 alt="<%= project.name %>" class="project-image">
                                            <p><%= project.description %></p>
                                        </div>
                                    <% }); %>
                                <% } else { %>
                                    <p>No projects available for this designer.</p>
                                <% } %>
                            </div>
                        </div>
                    <% }); %>
                <% } %>
            </div>
            
            <div class="book-now-container">
                <form id="bookDesignerForm" action="/interiordesign_form" method="GET">
                    <input type="hidden" name="workerId" id="selectedWorkerId" value="">
                    <button type="submit" class="book-now-btn" id="bookNowBtn">Book Now</button>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        // Navbar functionality
        const notificationIcon = document.getElementById('notificationIcon');
        const notificationPanel = document.getElementById('notificationPanel');
        
        if (notificationIcon && notificationPanel) {
            notificationIcon.addEventListener('click', function(e) {
                e.stopPropagation();
                notificationPanel.classList.toggle('show');
            });
            
            document.addEventListener('click', function(e) {
                if (!notificationPanel.contains(e.target) && !notificationIcon.contains(e.target)) {
                    notificationPanel.classList.remove('show');
                }
            });
        }
        
        // Designer selection functionality
        document.addEventListener('DOMContentLoaded', () => {
            // Get all designer cards
            const designerCards = document.querySelectorAll('.designer-card');
            const initialMessage = document.querySelector('.initial-message');
            const bookNowBtn = document.getElementById('bookNowBtn');
            const selectedWorkerIdInput = document.getElementById('selectedWorkerId');
            const bookDesignerForm = document.getElementById('bookDesignerForm');
            let activeDesignerId = null;
            
            // Add click event to each designer card
            designerCards.forEach(card => {
                card.addEventListener('click', () => {
                    // Remove active class from all cards
                    designerCards.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked card
                    card.classList.add('active');
                    
                    // Get designer ID
                    const designerId = card.getAttribute('data-id');
                    activeDesignerId = designerId;
                    
                    // Update the hidden input with worker ID
                    selectedWorkerIdInput.value = designerId;
                    
                    // Hide initial message
                    initialMessage.style.display = 'none';
                    
                    // Hide all designer details
                    document.querySelectorAll('.designer-details').forEach(detail => {
                        detail.classList.remove('active');
                    });
                    
                    // Show selected designer details
                    const selectedDesigner = document.getElementById(`designer-${designerId}`);
                    if (selectedDesigner) {
                        selectedDesigner.classList.add('active');
                    }
                });
            });
            
            // Book Now button functionality
            if (bookDesignerForm) {
                bookDesignerForm.addEventListener('submit', (e) => {
                    if (!activeDesignerId) {
                        e.preventDefault();
                        alert('Please select an interior designer before booking.');
                    }
                });
            }
        });
    </script>
</body>
</html>