<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architect Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
    <style>
        /* Your existing CSS remains unchanged */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
        } 
        .heading{
            width: 2rem;
            margin: 2rem auto;
        }
        .container {
            display: flex;
            width: 90%;
            height: 90vh;
            margin: 5vh auto;
            background-color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            overflow: hidden;
        }
        
        .left-section {
            width: 40%;
            height: 100%;
            overflow-y: auto;
            border-right: 1px solid #e0e0e0;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .a_right_section {
            width: 60%;
            height: 100%;
            position: relative;
            padding: 20px;
            background-color: white;
        }
        
        .architect-card {
            display: flex;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid #e0e0e0;
            background-color: white;
        }
        
        .architect-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .architect-card.active {
            background-color: #e6f7ff;
            border-color: #91d5ff;
        }
        
        .architect-image-small {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
            border: 2px solid #e0e0e0;
        }
        
        .architect-info h3 {
            margin-bottom: 5px;
            color: #333;
            font-size: 18px;
        }
        
        .architect-info p {
            color: #666;
            font-size: 14px;
        }
        
        .rating {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .rating .star {
            color: #ffd700;
            font-size: 16px;
            margin-right: 2px;
        }
        
        .right-content {
            height: calc(100% - 60px);
            overflow-y: auto;
            padding-bottom: 20px;
        }
        
        .right-content h2 {
            margin-bottom: 15px;
            color: #333;
            font-size: 24px;
        }
        
        .right-content .architect-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .architect-image-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 20px;
            border: 3px solid #e0e0e0;
        }
        
        .bio {
            margin-bottom: 30px;
        }
        
        .bio h3 {
            margin-bottom: 10px;
            color: #333;
            font-size: 20px;
        }
        
        .bio p {
            color: #555;
            line-height: 1.6;
        }
        
        .projects {
            margin-top: 30px;
        }
        
        .projects h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 20px;
        }
        
        .project {
            margin-bottom: 30px;
        }
        
        .project h4 {
            margin-bottom: 10px;
            color: #333;
            font-size: 18px;
        }
        
        .project-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .project p {
            color: #555;
            line-height: 1.6;
        }
        
        .reviews {
            margin-top: 30px;
        }
        
        .reviews h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 20px;
        }
        
        .review {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
        }
        
        .review h4 {
            margin-bottom: 5px;
            color: #333;
            font-size: 16px;
        }
        
        .review p {
            color: #555;
            line-height: 1.6;
        }
        
        .book-now-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            background-color: white;
            border-top: 1px solid #e0e0e0;
            text-align: center;
        }
        
        .book-now-btn {
            background-color: #f0c776;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s, transform 0.3s;
        }
        
        .book-now-btn:hover {
            background-color: #eac019;
            transform: translateY(-2px);
        }
        
        .hidden {
            display: none;
        }

        .company-info {
            margin-bottom: 30px;
        }

        .company-info h2 {
            margin-bottom: 15px;
            color: #333;
            font-size: 24px;
        }

        .company-info p {
            color: #555;
            line-height: 1.6;
        }

        .company-info ul {
            list-style-type: disc;
            margin-left: 20px;
            color: #555;
        }

        .company-info ul li {
            margin-bottom: 10px;
        }
        
        .architect-details {
            display: none;
        }
        
        .architect-details.active {
            display: block;
        }
    </style>
</head>
<body>
    <%- include('navbar_customer') %> 
    <h1 class="heading">Architects</h1>
    <div class="container">
        <div class="left-section" id="architectList">
            <% if (architects && architects.length > 0) { %>
                <% architects.forEach((architect, index) => { %>
                    <div class="architect-card" data-id="<%= architect._id %>">
                        <img src="<%= architect.profileImage || 'https://t4.ftcdn.net/jpg/03/64/21/11/360_F_364211147_1qgLVxv1Tcq0Ohz3FawUfrtONzz8nq3e.jpg' %>" 
                             alt="<%= architect.name %>" class="architect-image-small">
                        <div class="architect-info">
                            <h3><%= architect.name %></h3>
                            <p><%= architect.professionalTitle || 'Architect' %></p>
                            <p><%= architect.experience %> years experience</p>
                            <div class="rating">
                                <% for(let i = 0; i < Math.floor(architect.rating); i++) { %>
                                    <span class="star">★</span>
                                <% } %>
                                <% if(architect.rating % 1 >= 0.5) { %>
                                    <span class="star">½</span>
                                <% } %>
                                <span>(<%= architect.rating %>)</span>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div class="no-architects">
                    <p>No architects are currently available.</p>
                </div>
            <% } %>
        </div>
        
        <div class="a_right_section">
            <div class="right-content" id="architectDetails">
                <!-- Initial welcome message -->
                <div class="initial-message">
                    <div class="company-info">
                        <h2>Welcome to Build & Beyond Architects</h2>
                        <p>Build & Beyond Architects is a leading architectural firm dedicated to creating innovative and sustainable designs that inspire and transform communities. With over 20 years of experience, our team of talented architects and designers has delivered award-winning projects across the globe.</p>
                        <h3>Our Mission</h3>
                        <p>Our mission is to design spaces that enhance the quality of life, promote sustainability, and reflect the unique identity of our clients. We believe in the power of architecture to shape the future and create lasting impact.</p>
                        <h3>Our Services</h3>
                        <ul>
                            <li>Residential Architecture</li>
                            <li>Commercial Architecture</li>
                            <li>Urban Planning</li>
                            <li>Interior Design</li>
                            <li>Historic Preservation</li>
                            <li>Sustainable Design</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Dynamic Architect Details -->
                <% if (architects && architects.length > 0) { %>
                    <% architects.forEach(architect => { %>
                        <div class="architect-details" id="architect-<%= architect._id %>">
                            <div class="architect-header">
                                <img src="<%= architect.profileImage || 'https://t4.ftcdn.net/jpg/03/64/21/11/360_F_364211147_1qgLVxv1Tcq0Ohz3FawUfrtONzz8nq3e.jpg' %>" 
                                     alt="<%= architect.name %>" class="architect-image-large">
                                <div>
                                    <h2><%= architect.name %></h2>
                                    <p><strong><%= architect.professionalTitle || 'Architect' %></strong> with <%= architect.experience %> years experience</p>
                                    <div class="rating">
                                        <% for(let i = 0; i < Math.floor(architect.rating); i++) { %>
                                            <span class="star">★</span>
                                        <% } %>
                                        <% if(architect.rating % 1 >= 0.5) { %>
                                            <span class="star">½</span>
                                        <% } %>
                                        <span>(<%= architect.rating %>)</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bio">
                                <h3>About</h3>
                                <p><%= architect.about || 'Information not available' %></p>
                                <p><strong>Specialties:</strong> <%= architect.specialties && architect.specialties.length > 0 ? architect.specialties.join(', ') : 'Information not available' %></p>
                            </div>
                            
                            <div class="projects">
                                <h3>Notable Projects</h3>
                                <% if (architect.projects && architect.projects.length > 0) { %>
                                    <% architect.projects.forEach(project => { %>
                                        <div class="project">
                                            <h4><%= project.name %> (<%= project.year %>)</h4>
                                            <p><strong>Location:</strong> <%= project.location %></p>
                                            <img src="<%= project.image || 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQC7-RFA1xE4wTSP0DZJSJ1AJ8TitBYtkmEYA&s' %>" 
                                                 alt="<%= project.name %>" class="project-image">
                                            <p><%= project.description %></p>
                                        </div>
                                    <% }); %>
                                <% } else { %>
                                    <p>No projects available for this architect.</p>
                                <% } %>
                            </div>
                            
                            <!-- Note: Reviews aren't in your schema, so we'll leave a placeholder
                            <div class="reviews">
                                <h3>Customer Reviews</h3>
                                <p>No reviews available at this time.</p>
                            </div> -->
                        </div>
                    <% }); %>
                <% } %>
            </div>
            
            <div class="book-now-container">
                <form id="bookArchitectForm" action="/architecht_form" method="GET">
                    <input type="hidden" name="workerId" id="selectedWorkerId" value="">
                    <button type="submit" class="book-now-btn" id="bookNowBtn">Book Now</button>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        // Navbar functionality
        const notificationIcon = document.getElementById('notificationIcon');
        const notificationPanel = document.getElementById('notificationPanel');
        
        if (notificationIcon && notificationPanel) {
            notificationIcon.addEventListener('click', function(e) {
                e.stopPropagation();
                notificationPanel.classList.toggle('show');
            });
            
            document.addEventListener('click', function(e) {
                if (!notificationPanel.contains(e.target) && !notificationIcon.contains(e.target)) {
                    notificationPanel.classList.remove('show');
                }
            });
        }
        
        // Architect selection functionality
        document.addEventListener('DOMContentLoaded', () => {
            // Get all architect cards
            const architectCards = document.querySelectorAll('.architect-card');
            const initialMessage = document.querySelector('.initial-message');
            const bookNowBtn = document.getElementById('bookNowBtn');
            const selectedWorkerIdInput = document.getElementById('selectedWorkerId');
            const bookArchitectForm = document.getElementById('bookArchitectForm');
            let activeArchitectId = null;
            
            // Add click event to each architect card
            architectCards.forEach(card => {
                card.addEventListener('click', () => {
                    // Remove active class from all cards
                    architectCards.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked card
                    card.classList.add('active');
                    
                    // Get architect ID
                    const architectId = card.getAttribute('data-id');
                    activeArchitectId = architectId;
                    
                    // Update the hidden input with worker ID
                    selectedWorkerIdInput.value = architectId;
                    
                    // Hide initial message
                    initialMessage.style.display = 'none';
                    
                    // Hide all architect details
                    document.querySelectorAll('.architect-details').forEach(detail => {
                        detail.classList.remove('active');
                    });
                    
                    // Show selected architect details
                    const selectedArchitect = document.getElementById(`architect-${architectId}`);
                    if (selectedArchitect) {
                        selectedArchitect.classList.add('active');
                    }
                });
            });
            
            // Book Now button functionality
            if (bookArchitectForm) {
                bookArchitectForm.addEventListener('submit', (e) => {
                    if (!activeArchitectId) {
                        e.preventDefault();
                        alert('Please select an architect before booking.');
                    }
                });
            }
        });
    </script>
</body>
</html>